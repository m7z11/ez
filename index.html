<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy - ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --bg-start: #667eea;
  --bg-end: #764ba2;
  --card-bg: white;
  --text: #333;
  --border: #ddd;
  --shadow: rgba(0, 0, 0, 0.1);
  --input-bg: white;
  --sidebar-bg: #f8f9fa;
  --accent: #667eea;
}

body.dark-mode {
  --bg-start: #1a1a2e;
  --bg-end: #16213e;
  --card-bg: #0f3460;
  --text: #eaeaea;
  --border: #533483;
  --shadow: rgba(0, 0, 0, 0.5);
  --input-bg: #1a1a2e;
  --sidebar-bg: #0a1929;
  --accent: #764ba2;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
  min-height: 100vh;
  padding: 20px;
  direction: rtl;
}

header {
  text-align: center;
  color: white;
  margin-bottom: 30px;
  position: relative;
  z-index: 100;
}

h1 {
  font-size: 3em;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  font-weight: bold;
  animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
  from {
    text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px var(--accent);
  }
  to {
    text-shadow: 0 0 20px #fff, 0 0 30px var(--accent), 0 0 40px var(--accent);
  }
}

.top-buttons {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 10px;
  z-index: 1002;
}

.menu-btn, .dark-mode-btn {
  background: white;
  border: none;
  padding: 12px 16px;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1.3em;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
}

.menu-btn:hover, .dark-mode-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

body.dark-mode .menu-btn,
body.dark-mode .dark-mode-btn {
  background: var(--card-bg);
  color: var(--text);
}

.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  z-index: 998;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.4s ease, visibility 0.4s ease;
  backdrop-filter: blur(2px);
}

.sidebar-overlay.active {
  opacity: 1;
  visibility: visible;
}

.sidebar {
  position: fixed;
  top: 0;
  right: -320px;
  width: 320px;
  height: 100%;
  background: var(--sidebar-bg);
  box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
  transition: right 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  z-index: 999;
  overflow-y: auto;
  padding: 30px 20px;
}

body.dark-mode .sidebar {
  background: var(--sidebar-bg);
  color: var(--text);
}

.sidebar.active {
  right: 0;
}

.sidebar h3 {
  margin-bottom: 25px;
  color: var(--accent);
  font-size: 1.6em;
  text-align: center;
  padding-bottom: 15px;
  border-bottom: 2px solid var(--accent);
}

.sidebar button {
  width: 100%;
  padding: 15px 20px;
  margin-bottom: 12px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 1.1em;
  display: flex;
  align-items: center;
  gap: 12px;
  font-weight: 500;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.sidebar button:hover {
  transform: translateX(-5px);
  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
}

.sidebar button.reset-btn {
  background: linear-gradient(135deg, #f44336, #d32f2f);
  margin-top: 20px;
}

.card {
  background: var(--card-bg);
  color: var(--text);
  border-radius: 20px;
  padding: 30px;
  margin-bottom: 20px;
  box-shadow: 0 10px 30px var(--shadow);
  max-width: 1200px;
  margin: 20px auto;
  animation: slideIn 0.5s ease-out;
  transition: all 0.3s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px var(--shadow);
}

.level-selector {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 25px;
  justify-content: center;
}

.level-btn {
  padding: 12px 24px;
  border: 3px solid var(--border);
  border-radius: 12px;
  background: var(--card-bg);
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
  font-size: 1.1em;
}

.level-A1 { border-color: #4CAF50; }
.level-A1.active, .level-A1:hover {
  background: #4CAF50;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(76, 175, 80, 0.6);
}

.level-A2 { border-color: #2196F3; }
.level-A2.active, .level-A2:hover {
  background: #2196F3;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(33, 150, 243, 0.6);
}

.level-B1 { border-color: #FF9800; }
.level-B1.active, .level-B1:hover {
  background: #FF9800;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(255, 152, 0, 0.6);
}

.level-B2 { border-color: #9C27B0; }
.level-B2.active, .level-B2:hover {
  background: #9C27B0;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(156, 39, 176, 0.6);
}

.level-C1 {
  border-color: #FFD700;
  position: relative;
  overflow: hidden;
}

.level-C1::before {
  content: 'ğŸ‘‘';
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: 1.2em;
  animation: bounce 1s infinite;
}

.level-C1.active, .level-C1:hover {
  background: linear-gradient(135deg, #FFD700, #FFA500);
  color: white;
  transform: scale(1.1);
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

input, button {
  padding: 14px;
  border-radius: 10px;
  border: 2px solid var(--border);
  font-size: 1.05em;
  margin: 8px;
  background: var(--input-bg);
  color: var(--text);
}

input {
  width: calc(50% - 16px);
  transition: all 0.3s ease;
}

input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
}

button {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  font-weight: 600;
}

button::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

button:hover::before {
  width: 300px;
  height: 300px;
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
}

.add-options {
  background: var(--input-bg);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  border: 2px solid var(--border);
}

.add-options h3 {
  color: var(--accent);
  margin-bottom: 15px;
  font-size: 1.2em;
}

.letter-selector {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
  gap: 8px;
  margin: 15px 0;
}

.letter-select-btn {
  padding: 10px;
  background: var(--input-bg);
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: bold;
  color: var(--text);
  margin: 0;
}

.letter-select-btn:hover {
  background: var(--accent);
  color: white;
  transform: scale(1.1);
}

.letter-select-btn.active {
  background: var(--accent);
  color: white;
  border-color: var(--accent);
}

.stat-box {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  padding: 25px;
  border-radius: 15px;
  text-align: center;
  margin: 12px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

.test-question {
  font-size: 1.6em;
  margin: 25px 0;
  text-align: center;
  font-weight: 600;
}

.test-input {
  width: 80%;
  padding: 18px;
  font-size: 1.3em;
  text-align: center;
  border: 3px solid var(--accent);
}

.result {
  padding: 18px;
  margin: 18px 0;
  border-radius: 12px;
  text-align: center;
  animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  font-size: 1.2em;
  font-weight: 600;
}

@keyframes popIn {
  0% {
    opacity: 0;
    transform: scale(0.3) rotate(-10deg);
  }
  50% {
    transform: scale(1.1) rotate(5deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0);
  }
}

.correct {
  background: #4CAF50;
  color: white;
  box-shadow: 0 0 25px rgba(76, 175, 80, 0.6);
}

.incorrect {
  background: #f44336;
  color: white;
  box-shadow: 0 0 25px rgba(244, 67, 54, 0.6);
}

.letter-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
  gap: 12px;
  margin: 25px 0;
}

.letter-btn {
  padding: 18px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1.3em;
  font-weight: bold;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  margin: 0;
}

.letter-btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.5s;
}

.letter-btn:hover::after {
  left: 100%;
}

.letter-btn:hover {
  transform: scale(1.15) rotate(5deg);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);
}

.hidden {
  display: none;
}

.progress-bar {
  width: 100%;
  height: 24px;
  background: var(--border);
  border-radius: 12px;
  overflow: hidden;
  margin: 25px 0;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #4CAF50, #2196F3, #9C27B0, #FFD700);
  transition: width 0.5s ease;
  background-size: 200% 100%;
  animation: shimmer 3s infinite;
}

@keyframes shimmer {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.75);
  z-index: 2000;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(5px);
}

.modal.active {
  display: flex;
}

.modal-content {
  background: var(--card-bg);
  color: var(--text);
  padding: 40px;
  border-radius: 20px;
  text-align: center;
  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
  animation: popIn 0.4s ease;
  max-width: 400px;
}

.modal-content h2 {
  margin-bottom: 20px;
  font-size: 1.8em;
}

.modal-content p {
  margin-bottom: 25px;
  font-size: 1.1em;
}

.word-item {
  background: var(--input-bg);
  padding: 18px;
  margin: 12px 0;
  border-radius: 12px;
  border-right: 5px solid var(--accent);
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
  animation: fadeInLeft 0.5s ease;
}

.word-item:hover {
  transform: translateX(-8px) scale(1.02);
  box-shadow: 0 6px 18px rgba(102, 126, 234, 0.3);
  border-right-width: 8px;
}

@keyframes fadeInLeft {
  from {
    opacity: 0;
    transform: translateX(50px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.search-box {
  width: 100%;
  padding: 15px;
  margin-bottom: 20px;
  border-radius: 12px;
  font-size: 1.1em;
}

@media (max-width: 768px) {
  input { width: 100%; }
  .letter-grid { grid-template-columns: repeat(auto-fill, minmax(55px, 1fr)); }
  .letter-selector { grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); }
  .sidebar { width: 280px; right: -280px; }
  h1 { font-size: 2.2em; }
}
</style>
</head>
<body>
<div class="sidebar-overlay" id="overlay" onclick="toggleMenu()"></div>

<div class="top-buttons">
  <button class="dark-mode-btn" onclick="toggleDark()">ğŸŒ™</button>
  <button class="menu-btn" onclick="toggleMenu()">â˜°</button>
</div>

<div class="sidebar" id="sidebar">
  <h3>ğŸ“‹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
  <button onclick="showPage('add')">
    <span>â•</span> Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø©
  </button>
  <button onclick="showPage('words')">
    <span>ğŸ“š</span> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª
  </button>
  <button onclick="showPage('test')">
    <span>ğŸ“</span> Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
  </button>
  <button onclick="showPage('errors')">
    <span>âŒ</span> Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
  </button>
  <button onclick="showPage('stats')">
    <span>ğŸ“Š</span> Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
  </button>
  <button onclick="showReset()" class="reset-btn">
    <span>ğŸ”„</span> Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·
  </button>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <h2>âš ï¸ ØªØ­Ø°ÙŠØ±</h2>
    <p>Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© ÙˆÙ„Ù† ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ±Ø¬Ø§Ø¹Ù‡Ø§</p>
    <button onclick="hideModal()" style="background: linear-gradient(135deg, #4CAF50, #45a049); margin: 5px;">
      Ø¥Ù„ØºØ§Ø¡
    </button>
    <button onclick="confirmReset()" style="background: linear-gradient(135deg, #f44336, #d32f2f); margin: 5px;">
      ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù
    </button>
  </div>
</div>

<header>
  <h1>ğŸ“š Easy</h1>
</header>

<div id="page-add" class="page">
  <div class="card">
    <h2>â• Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
    
    <div class="add-options">
      <h3>ğŸ¯ Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</h3>
      <div class="level-selector">
        <button class="level-btn level-A1 active" onclick="selectLevel('A1')">A1</button>
        <button class="level-btn level-A2" onclick="selectLevel('A2')">A2</button>
        <button class="level-btn level-B1" onclick="selectLevel('B1')">B1</button>
        <button class="level-btn level-B2" onclick="selectLevel('B2')">B2</button>
        <button class="level-btn level-C1" onclick="selectLevel('C1')">C1</button>
      </div>
      
      <h3>ğŸ”¤ Ø§Ø®ØªØ± Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£ÙˆÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</h3>
      <div class="letter-selector" id="add-letters"></div>
    </div>

    <input type="text" id="eng" placeholder="Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">
    <input type="text" id="ara" placeholder="Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ">
    <button onclick="addWord()">âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø©</button>
    <p id="msg" style="text-align: center; margin-top: 15px; font-size: 1.2em; font-weight: 600;"></p>
  </div>
</div>

<div id="page-words" class="page hidden">
  <div class="card">
    <h2>ğŸ“š Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª</h2>
    <div class="level-selector">
      <button class="level-btn level-A1 active" onclick="selectWordsLevel('A1')">A1</button>
      <button class="level-btn level-A2" onclick="selectWordsLevel('A2')">A2</button>
      <button class="level-btn level-B1" onclick="selectWordsLevel('B1')">B1</button>
      <button class="level-btn level-B2" onclick="selectWordsLevel('B2')">B2</button>
      <button class="level-btn level-C1" onclick="selectWordsLevel('C1')">C1</button>
    </div>
    <input type="text" class="search-box" id="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ù…Ø©..." oninput="filterWords()">
    <div id="words-list"></div>
  </div>
</div>

<div id="page-test" class="page hidden">
  <div class="card">
    <h2>ğŸ“ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h2>
    <div class="level-selector">
      <button class="level-btn level-A1" onclick="selectTestLevel('A1')">A1</button>
      <button class="level-btn level-A2" onclick="selectTestLevel('A2')">A2</button>
      <button class="level-btn level-B1" onclick="selectTestLevel('B1')">B1</button>
      <button class="level-btn level-B2" onclick="selectTestLevel('B2')">B2</button>
      <button class="level-btn level-C1" onclick="selectTestLevel('C1')">C1</button>
    </div>
    <div id="test-opt" class="hidden">
      <button onclick="selectDir('ar-en')" style="background: linear-gradient(135deg, #4CAF50, #45a049)">
        ğŸ‡¸ğŸ‡¦ Ø¹Ø±Ø¨ÙŠ â†’ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ğŸ‡¬ğŸ‡§
      </button>
      <button onclick="selectDir('en-ar')" style="background: linear-gradient(135deg, #2196F3, #1976D2)">
        ğŸ‡¬ğŸ‡§ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ â†’ Ø¹Ø±Ø¨ÙŠ ğŸ‡¸ğŸ‡¦
      </button>
      <button onclick="selectDir('random')" style="background: linear-gradient(135deg, #FF9800, #F57C00)">
        ğŸ”€ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
      </button>
      <div id="letters" class="hidden">
        <h3>ğŸ”¤ Ø§Ø®ØªØ± Ø§Ù„Ø­Ø±Ù:</h3>
        <div class="letter-grid" id="grid"></div>
        <button onclick="startTest('final', '')" style="width: 100%; margin-top: 15px;">
          ğŸ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„
        </button>
      </div>
    </div>
  </div>
  <div class="card hidden" id="test-card">
    <h2 id="test-title"></h2>
    <div class="progress-bar">
      <div class="progress-fill" id="progress"></div>
    </div>
    <p id="counter" style="text-align: center; font-size: 1.2em; font-weight: 600;"></p>
    <div class="test-question" id="q"></div>
    <input type="text" class="test-input" id="ans" placeholder="âœï¸ Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§">
    <button id="check" onclick="checkAns()">âœ“ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
    <button onclick="skip()">â­ï¸ ØªØ¬Ø§ÙˆØ²</button>
    <button onclick="next()" class="hidden" id="next-btn">â¡ï¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    <div id="result"></div>
  </div>
</div>

<div id="page-errors" class="page hidden">
  <div class="card">
    <h2>âŒ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h2>
    <button onclick="testErrors()" style="width: 100%; margin-bottom: 20px;">
      ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
    </button>
    <div id="errors-list"></div>
  </div>
</div>

<div id="page-stats" class="page hidden">
  <div class="card">
    <h2>ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
    <div class="stat-box">
      <h3 id="total" style="font-size: 2.5em;">0</h3>
      <p style="font-size: 1.2em;">ğŸ“š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</p>
    </div>
    <div class="stat-box">
      <h3 id="correct" style="font-size: 2.5em;">0</h3>
      <p style="font-size: 1.2em;">âœ… Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</p>
    </div>
    <div class="stat-box">
      <h3 id="wrong" style="font-size: 2.5em;">0</h3>
      <p style="font-size: 1.2em;">âŒ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©</p>
    </div>
    <div id="level-stats"></div>
  </div>
</div>

<script>
const DEFAULT_DATA = "about,Ø¹Ù†|above,ÙÙˆÙ‚|across,Ø¹Ø¨Ø±|action,Ø­Ø±ÙƒØ©|activity,Ù†Ø´Ø§Ø·|add,ÙŠØ¶ÙŠÙ|address,Ø¹Ù†ÙˆØ§Ù†|advice,Ù†ØµÙŠØ­Ø©|afraid,Ø®Ø§Ø¦Ù|after,Ø¨Ø¹Ø¯|afternoon,Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø±|again,Ù…Ø±Ø© Ø£Ø®Ø±Ù‰|age,Ø¹Ù…Ø±|air,Ù‡ÙˆØ§Ø¡|airport,Ù…Ø·Ø§Ø±|all,ÙƒÙ„|also,Ø£ÙŠØ¶Ø§Ù‹|always,Ø¯Ø§Ø¦Ù…Ø§Ù‹|and,Ùˆ|angry,ØºØ§Ø¶Ø¨|animal,Ø­ÙŠÙˆØ§Ù†|answer,Ø¥Ø¬Ø§Ø¨Ø©|any,Ø£ÙŠ|apple,ØªÙØ§Ø­Ø©|April,Ø£Ø¨Ø±ÙŠÙ„|area,Ù…Ù†Ø·Ù‚Ø©|arm,Ø°Ø±Ø§Ø¹|around,Ø­ÙˆÙ„|arrive,ÙŠØµÙ„|art,ÙÙ†|as,ÙƒÙ€|ask,ÙŠØ³Ø§Ù„|at,ÙÙŠ|August,Ø£ØºØ³Ø·Ø³|autumn,Ø§Ù„Ø®Ø±ÙŠÙ|away,Ø¨Ø¹ÙŠØ¯Ø§Ù‹|baby,Ø·ÙÙ„|back,Ø®Ù„Ù|bad,Ø³ÙŠØ¡|bag,Ø­Ù‚ÙŠØ¨Ø©|ball,ÙƒØ±Ø©|banana,Ù…ÙˆØ²Ø©|bank,Ø¨Ù†Ùƒ|bath,Ø§Ø³ØªØ­Ù…Ø§Ù…|be,ÙŠÙƒÙˆÙ†|beach,Ø´Ø§Ø·Ø¦|beautiful,Ø¬Ù…ÙŠÙ„|because,Ù„Ø£Ù†|become,ÙŠØµØ¨Ø­|bed,Ø³Ø±ÙŠØ±|bedroom,ØºØ±ÙØ© Ù†ÙˆÙ…|before,Ù‚Ø¨Ù„|begin,ÙŠØ¨Ø¯Ø£|behind,Ø®Ù„Ù|best,Ø§Ù„Ø£ÙØ¶Ù„|better,Ø£ÙØ¶Ù„|between,Ø¨ÙŠÙ†|big,ÙƒØ¨ÙŠØ±|bike,Ø¯Ø±Ø§Ø¬Ø©|bird,Ø·Ø§Ø¦Ø±|birthday,Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯|black,Ø£Ø³ÙˆØ¯|blue,Ø£Ø²Ø±Ù‚|boat,Ù‚Ø§Ø±Ø¨|body,Ø¬Ø³Ù…|book,ÙƒØªØ§Ø¨|boy,ÙˆÙ„Ø¯|bread,Ø®Ø¨Ø²|break,ÙŠÙƒØ³Ø±|breakfast,ÙØ·ÙˆØ±|brother,Ø£Ø®|brown,Ø¨Ù†ÙŠ|bus,Ø­Ø§ÙÙ„Ø©|business,Ø¹Ù…Ù„|busy,Ù…Ø´ØºÙˆÙ„|but,Ù„ÙƒÙ†|buy,ÙŠØ´ØªØ±ÙŠ|by,Ø¨ÙˆØ§Ø³Ø·Ø©|cafe,Ù…Ù‚Ù‡Ù‰|cake,ÙƒØ¹ÙƒØ©|call,ÙŠØªØµÙ„|camera,ÙƒØ§Ù…ÙŠØ±Ø§|can,ÙŠØ³ØªØ·ÙŠØ¹|car,Ø³ÙŠØ§Ø±Ø©|card,Ø¨Ø·Ø§Ù‚Ø©|cat,Ù‚Ø·Ø©|chair,ÙƒØ±Ø³ÙŠ|change,ÙŠØºÙŠØ±|cheap,Ø±Ø®ÙŠØµ|cheese,Ø¬Ø¨Ù†|chicken,Ø¯Ø¬Ø§Ø¬|child,Ø·ÙÙ„|city,Ù…Ø¯ÙŠÙ†Ø©|class,ÙØµÙ„|clean,Ù†Ø¸ÙŠÙ|clock,Ø³Ø§Ø¹Ø©|close,ÙŠØºÙ„Ù‚|clothes,Ù…Ù„Ø§Ø¨Ø³|coffee,Ù‚Ù‡ÙˆØ©|cold,Ø¨Ø§Ø±Ø¯|come,ÙŠØ£ØªÙŠ|computer,ÙƒÙ…Ø¨ÙŠÙˆØªØ±|cook,ÙŠØ·Ø¨Ø®|cool,Ø±Ø§Ø¦Ø¹|country,Ø¨Ù„Ø¯|cup,ÙƒÙˆØ¨|dad,Ø£Ø¨|dance,ÙŠØ±Ù‚Øµ|dangerous,Ø®Ø·ÙŠØ±|dark,Ù…Ø¸Ù„Ù…|date,ØªØ§Ø±ÙŠØ®|day,ÙŠÙˆÙ…|December,Ø¯ÙŠØ³Ù…Ø¨Ø±|delicious,Ù„Ø°ÙŠØ°|desk,Ù…ÙƒØªØ¨|dictionary,Ù‚Ø§Ù…ÙˆØ³|difficult,ØµØ¹Ø¨|dinner,Ø¹Ø´Ø§Ø¡|dirty,Ù…ØªØ³Ø®|do,ÙŠÙØ¹Ù„|doctor,Ø·Ø¨ÙŠØ¨|dog,ÙƒÙ„Ø¨|door,Ø¨Ø§Ø¨|down,Ù„Ø£Ø³ÙÙ„|draw,ÙŠØ±Ø³Ù…|dream,Ø­Ù„Ù…|dress,ÙØ³ØªØ§Ù†|drink,ÙŠØ´Ø±Ø¨|drive,ÙŠÙ‚ÙˆØ¯|ear,Ø£Ø°Ù†|early,Ø¨Ø§ÙƒØ±Ø§Ù‹|easy,Ø³Ù‡Ù„|eat,ÙŠØ£ÙƒÙ„|egg,Ø¨ÙŠØ¶Ø©|eight,Ø«Ù…Ø§Ù†ÙŠØ©|elephant,ÙÙŠÙ„|eleven,Ø£Ø­Ø¯ Ø¹Ø´Ø±|email,Ø¨Ø±ÙŠØ¯|end,Ù†Ù‡Ø§ÙŠØ©|enjoy,ÙŠØ³ØªÙ…ØªØ¹|evening,Ù…Ø³Ø§Ø¡|every,ÙƒÙ„|eye,Ø¹ÙŠÙ†|face,ÙˆØ¬Ù‡|family,Ø¹Ø§Ø¦Ù„Ø©|famous,Ù…Ø´Ù‡ÙˆØ±|far,Ø¨Ø¹ÙŠØ¯|farm,Ù…Ø²Ø±Ø¹Ø©|fast,Ø³Ø±ÙŠØ¹|father,Ø£Ø¨|February,ÙØ¨Ø±Ø§ÙŠØ±|feel,ÙŠØ´Ø¹Ø±|fifteen,Ø®Ù…Ø³Ø© Ø¹Ø´Ø±|fifty,Ø®Ù…Ø³ÙˆÙ†|find,ÙŠØ¬Ø¯|fine,Ø¨Ø®ÙŠØ±|finish,ÙŠÙ†Ù‡ÙŠ|fire,Ù†Ø§Ø±|first,Ø£ÙˆÙ„|fish,Ø³Ù…Ùƒ|five,Ø®Ù…Ø³Ø©|flat,Ø´Ù‚Ø©|floor,Ø£Ø±Ø¶ÙŠØ©|flower,Ø²Ù‡Ø±Ø©|fly,ÙŠØ·ÙŠØ±|food,Ø·Ø¹Ø§Ù…|foot,Ù‚Ø¯Ù…|for,Ù„Ø£Ø¬Ù„|forget,ÙŠÙ†Ø³Ù‰|four,Ø£Ø±Ø¨Ø¹Ø©|fourteen,Ø£Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±|free,Ø­Ø±|Friday,Ø§Ù„Ø¬Ù…Ø¹Ø©|friend,ØµØ¯ÙŠÙ‚|from,Ù…Ù†|fruit,ÙØ§ÙƒÙ‡Ø©|full,Ù…Ù…ØªÙ„Ø¦|fun,Ù…Ø±Ø­|funny,Ù…Ø¶Ø­Ùƒ|game,Ù„Ø¹Ø¨Ø©|garden,Ø­Ø¯ÙŠÙ‚Ø©|get,ÙŠØ­ØµÙ„|girl,Ø¨Ù†Øª|give,ÙŠØ¹Ø·ÙŠ|glass,Ø²Ø¬Ø§Ø¬|go,ÙŠØ°Ù‡Ø¨|good,Ø¬ÙŠØ¯|grandfather,Ø¬Ø¯|grandmother,Ø¬Ø¯Ø©|great,Ø¹Ø¸ÙŠÙ…|green,Ø£Ø®Ø¶Ø±|hair,Ø´Ø¹Ø±|hand,ÙŠØ¯|happy,Ø³Ø¹ÙŠØ¯|hard,ØµØ¹Ø¨|hat,Ù‚Ø¨Ø¹Ø©|have,ÙŠÙ…Ù„Ùƒ|he,Ù‡Ùˆ|head,Ø±Ø£Ø³|healthy,ØµØ­ÙŠ|hear,ÙŠØ³Ù…Ø¹|hello,Ù…Ø±Ø­Ø¨Ø§Ù‹|help,ÙŠØ³Ø§Ø¹Ø¯|her,Ù„Ù‡Ø§|here,Ù‡Ù†Ø§|high,Ù…Ø±ØªÙØ¹|him,Ù‡Ùˆ|his,Ù„Ù‡|home,Ù…Ù†Ø²Ù„|homework,ÙˆØ§Ø¬Ø¨|horse,Ø­ØµØ§Ù†|hospital,Ù…Ø³ØªØ´ÙÙ‰|hot,Ø­Ø§Ø±|hotel,ÙÙ†Ø¯Ù‚|hour,Ø³Ø§Ø¹Ø©|house,Ø¨ÙŠØª|how,ÙƒÙŠÙ|hundred,Ù…Ø¦Ø©|hungry,Ø¬Ø§Ø¦Ø¹|I,Ø£Ù†Ø§|ice,Ø«Ù„Ø¬|idea,ÙÙƒØ±Ø©|if,Ø¥Ø°Ø§|important,Ù…Ù‡Ù…|in,ÙÙŠ|interesting,Ù…Ù…ØªØ¹|internet,Ø¥Ù†ØªØ±Ù†Øª|is,ÙŠÙƒÙˆÙ†|island,Ø¬Ø²ÙŠØ±Ø©|it,Ù‡Ùˆ|jacket,Ø³ØªØ±Ø©|January,ÙŠÙ†Ø§ÙŠØ±|job,ÙˆØ¸ÙŠÙØ©|juice,Ø¹ØµÙŠØ±|July,ÙŠÙˆÙ„ÙŠÙˆ|June,ÙŠÙˆÙ†ÙŠÙˆ|just,ÙÙ‚Ø·|keep,ÙŠØ­ÙØ¸|key,Ù…ÙØªØ§Ø­|kind,Ù†ÙˆØ¹|kitchen,Ù…Ø·Ø¨Ø®|know,ÙŠØ¹Ø±Ù|language,Ù„ØºØ©|large,ÙƒØ¨ÙŠØ±|last,Ø§Ù„Ø£Ø®ÙŠØ±|late,Ù…ØªØ£Ø®Ø±|laugh,ÙŠØ¶Ø­Ùƒ|learn,ÙŠØªØ¹Ù„Ù…|leave,ÙŠØºØ§Ø¯Ø±|left,ÙŠØ³Ø§Ø±|lesson,Ø¯Ø±Ø³|letter,Ø±Ø³Ø§Ù„Ø©|library,Ù…ÙƒØªØ¨Ø©|life,Ø­ÙŠØ§Ø©|light,Ø¶ÙˆØ¡|like,ÙŠØ­Ø¨|listen,ÙŠØ³ØªÙ…Ø¹|little,ØµØºÙŠØ±|live,ÙŠØ¹ÙŠØ´|long,Ø·ÙˆÙŠÙ„|look,ÙŠÙ†Ø¸Ø±|love,ÙŠØ­Ø¨|lunch,ØºØ¯Ø§Ø¡|make,ÙŠØµÙ†Ø¹|man,Ø±Ø¬Ù„|many,ÙƒØ«ÙŠØ±|map,Ø®Ø±ÙŠØ·Ø©|March,Ù…Ø§Ø±Ø³|May,Ù…Ø§ÙŠÙˆ|me,Ø£Ù†Ø§|milk,Ø­Ù„ÙŠØ¨|minute,Ø¯Ù‚ÙŠÙ‚Ø©|Monday,Ø§Ù„Ø§Ø«Ù†ÙŠÙ†|money,Ù…Ø§Ù„|month,Ø´Ù‡Ø±|more,Ø£ÙƒØ«Ø±|morning,ØµØ¨Ø§Ø­|mother,Ø£Ù…|mountain,Ø¬Ø¨Ù„|mouth,ÙÙ…|movie,ÙÙŠÙ„Ù…|music,Ù…ÙˆØ³ÙŠÙ‚Ù‰|my,Ù„ÙŠ|name,Ø§Ø³Ù…|near,Ù‚Ø±ÙŠØ¨|new,Ø¬Ø¯ÙŠØ¯|news,Ø£Ø®Ø¨Ø§Ø±|next,Ø§Ù„Ù‚Ø§Ø¯Ù…|nice,Ù„Ø·ÙŠÙ|night,Ù„ÙŠÙ„Ø©|nine,ØªØ³Ø¹Ø©|nineteen,ØªØ³Ø¹Ø© Ø¹Ø´Ø±|ninety,ØªØ³Ø¹ÙˆÙ†|no,Ù„Ø§|north,Ø´Ù…Ø§Ù„|nose,Ø£Ù†Ù|not,Ù„ÙŠØ³|November,Ù†ÙˆÙÙ…Ø¨Ø±|now,Ø§Ù„Ø¢Ù†|number,Ø±Ù‚Ù…|October,Ø£ÙƒØªÙˆØ¨Ø±|of,Ù…Ù†|office,Ù…ÙƒØªØ¨|old,Ù‚Ø¯ÙŠÙ…|on,Ø¹Ù„Ù‰|one,ÙˆØ§Ø­Ø¯|open,ÙŠÙØªØ­|or,Ø£Ùˆ|orange,Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ|our,Ù„Ù†Ø§|out,Ø®Ø§Ø±Ø¬|page,ØµÙØ­Ø©|paper,ÙˆØ±Ù‚Ø©|parent,ÙˆØ§Ù„Ø¯|park,Ø­Ø¯ÙŠÙ‚Ø©|party,Ø­ÙÙ„Ø©|pen,Ù‚Ù„Ù…|people,Ù†Ø§Ø³|phone,Ù‡Ø§ØªÙ|photo,ØµÙˆØ±Ø©|picture,ØµÙˆØ±Ø©|pink,ÙˆØ±Ø¯ÙŠ|place,Ù…ÙƒØ§Ù†|play,ÙŠÙ„Ø¹Ø¨|please,Ù…Ù† ÙØ¶Ù„Ùƒ|police,Ø´Ø±Ø·Ø©|pool,Ù…Ø³Ø¨Ø­|poor,ÙÙ‚ÙŠØ±|price,Ø³Ø¹Ø±|question,Ø³Ø¤Ø§Ù„|quick,Ø³Ø±ÙŠØ¹|quiet,Ù‡Ø§Ø¯Ø¦|rain,Ù…Ø·Ø±|read,ÙŠÙ‚Ø±Ø£|ready,Ø¬Ø§Ù‡Ø²|red,Ø£Ø­Ù…Ø±|remember,ÙŠØªØ°ÙƒØ±|restaurant,Ù…Ø·Ø¹Ù…|rice,Ø£Ø±Ø²|rich,ØºÙ†ÙŠ|right,ÙŠÙ…ÙŠÙ†|river,Ù†Ù‡Ø±|road,Ø·Ø±ÙŠÙ‚|room,ØºØ±ÙØ©|run,ÙŠØ¬Ø±ÙŠ|sad,Ø­Ø²ÙŠÙ†|salt,Ù…Ù„Ø­|same,Ù†ÙØ³|Saturday,Ø§Ù„Ø³Ø¨Øª|say,ÙŠÙ‚ÙˆÙ„|school,Ù…Ø¯Ø±Ø³Ø©|sea,Ø¨Ø­Ø±|second,Ø«Ø§Ù†Ù|see,ÙŠØ±Ù‰|sell,ÙŠØ¨ÙŠØ¹|send,ÙŠØ±Ø³Ù„|September,Ø³Ø¨ØªÙ…Ø¨Ø±|seven,Ø³Ø¨Ø¹Ø©|seventeen,Ø³Ø¨Ø¹Ø© Ø¹Ø´Ø±|seventy,Ø³Ø¨Ø¹ÙˆÙ†|she,Ù‡ÙŠ|shirt,Ù‚Ù…ÙŠØµ|shoe,Ø­Ø°Ø§Ø¡|shop,Ù…Ø­Ù„|short,Ù‚ØµÙŠØ±|show,ÙŠÙˆØ¶Ø­|sing,ÙŠØºÙ†ÙŠ|sister,Ø£Ø®Øª|sit,ÙŠØ¬Ù„Ø³|six,Ø³ØªØ©|sixteen,Ø³ØªØ© Ø¹Ø´Ø±|sixty,Ø³ØªÙˆÙ†|sleep,ÙŠÙ†Ø§Ù…|slow,Ø¨Ø·ÙŠØ¡|small,ØµØºÙŠØ±|snow,Ø«Ù„Ø¬|so,Ù„Ø°Ù„Ùƒ|some,Ø¨Ø¹Ø¶|son,Ø§Ø¨Ù†|song,Ø£ØºÙ†ÙŠØ©|soon,Ù‚Ø±ÙŠØ¨Ø§Ù‹|sorry,Ø¢Ø³Ù|south,Ø¬Ù†ÙˆØ¨|speak,ÙŠØªØ­Ø¯Ø«|sport,Ø±ÙŠØ§Ø¶Ø©|spring,Ø§Ù„Ø±Ø¨ÙŠØ¹|stand,ÙŠÙ‚Ù|start,ÙŠØ¨Ø¯Ø£|station,Ù…Ø­Ø·Ø©|stop,ÙŠØªÙˆÙ‚Ù|store,Ù…ØªØ¬Ø±|story,Ù‚ØµØ©|street,Ø´Ø§Ø±Ø¹|strong,Ù‚ÙˆÙŠ|student,Ø·Ø§Ù„Ø¨|study,ÙŠØ¯Ø±Ø³|summer,Ø§Ù„ØµÙŠÙ|sun,Ø´Ù…Ø³|Sunday,Ø§Ù„Ø£Ø­Ø¯|swim,ÙŠØ³Ø¨Ø­|table,Ø·Ø§ÙˆÙ„Ø©|take,ÙŠØ£Ø®Ø°|talk,ÙŠØªØ­Ø¯Ø«|tall,Ø·ÙˆÙŠÙ„|tea,Ø´Ø§ÙŠ|teach,ÙŠØ¯Ø±Ù‘Ø³|teacher,Ù…Ø¹Ù„Ù…|team,ÙØ±ÙŠÙ‚|telephone,Ù‡Ø§ØªÙ|television,ØªÙ„ÙØ§Ø²|tell,ÙŠØ®Ø¨Ø±|ten,Ø¹Ø´Ø±Ø©|test,Ø§Ø®ØªØ¨Ø§Ø±|than,Ù…Ù†|thank,ÙŠØ´ÙƒØ±|that,Ø°Ù„Ùƒ|the,Ø§Ù„Ù€|their,Ù„Ù‡Ù…|them,Ù‡Ù…|then,Ø«Ù…|there,Ù‡Ù†Ø§Ùƒ|they,Ù‡Ù…|thing,Ø´ÙŠØ¡|think,ÙŠÙÙƒØ±|thirsty,Ø¹Ø·Ø´Ø§Ù†|thirteen,Ø«Ù„Ø§Ø«Ø© Ø¹Ø´Ø±|thirty,Ø«Ù„Ø§Ø«ÙˆÙ†|this,Ù‡Ø°Ø§|three,Ø«Ù„Ø§Ø«Ø©|Thursday,Ø§Ù„Ø®Ù…ÙŠØ³|time,ÙˆÙ‚Øª|tired,Ù…ØªØ¹Ø¨|to,Ø¥Ù„Ù‰|today,Ø§Ù„ÙŠÙˆÙ…|together,Ù…Ø¹Ø§Ù‹|tomorrow,ØºØ¯Ø§Ù‹|too,Ø£ÙŠØ¶Ø§Ù‹|town,Ù…Ø¯ÙŠÙ†Ø©|train,Ù‚Ø·Ø§Ø±|tree,Ø´Ø¬Ø±Ø©|trip,Ø±Ø­Ù„Ø©|true,ØµØ­ÙŠØ­|try,ÙŠØ­Ø§ÙˆÙ„|Tuesday,Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡|twelve,Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±|twenty,Ø¹Ø´Ø±ÙˆÙ†|two,Ø§Ø«Ù†Ø§Ù†|under,ØªØ­Øª|understand,ÙŠÙÙ‡Ù…|university,Ø¬Ø§Ù…Ø¹Ø©|up,Ù„Ù„Ø£Ø¹Ù„Ù‰|us,Ù†Ø­Ù†|use,ÙŠØ³ØªØ®Ø¯Ù…|very,Ø¬Ø¯Ø§Ù‹|video,ÙÙŠØ¯ÙŠÙˆ|visit,ÙŠØ²ÙˆØ±|wait,ÙŠÙ†ØªØ¸Ø±|wake,ÙŠØ³ØªÙŠÙ‚Ø¸|walk,ÙŠÙ…Ø´ÙŠ|want,ÙŠØ±ÙŠØ¯|warm,Ø¯Ø§ÙØ¦|wash,ÙŠØºØ³Ù„|watch,ÙŠØ´Ø§Ù‡Ø¯|water,Ù…Ø§Ø¡|way,Ø·Ø±ÙŠÙ‚|we,Ù†Ø­Ù†|wear,ÙŠØ±ØªØ¯ÙŠ|weather,Ø·Ù‚Ø³|Wednesday,Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡|week,Ø£Ø³Ø¨ÙˆØ¹|weekend,Ø¹Ø·Ù„Ø©|well,Ø¬ÙŠØ¯Ø§Ù‹|west,ØºØ±Ø¨|what,Ù…Ø§Ø°Ø§|when,Ù…ØªÙ‰|where,Ø£ÙŠÙ†|white,Ø£Ø¨ÙŠØ¶|who,Ù…Ù†|why,Ù„Ù…Ø§Ø°Ø§|wife,Ø²ÙˆØ¬Ø©|window,Ù†Ø§ÙØ°Ø©|winter,Ø§Ù„Ø´ØªØ§Ø¡|with,Ù…Ø¹|woman,Ø§Ù…Ø±Ø£Ø©|work,ÙŠØ¹Ù…Ù„|world,Ø¹Ø§Ù„Ù…|write,ÙŠÙƒØªØ¨|year,Ø³Ù†Ø©|yellow,Ø£ØµÙØ±|yes,Ù†Ø¹Ù…|yesterday,Ø£Ù…Ø³|you,Ø£Ù†Øª|young,Ø´Ø§Ø¨|zero,ØµÙØ±";

const A1_WORDS = DEFAULT_DATA.split("|").map(w => {
  const [e, a] = w.split(",");
  return { english: e, arabic: a };
});

let words = {};
let errors = [];
let stats = { correct: 0, wrong: 0 };
let test = [];
let idx = 0;
let lvl = 'A1';
let testLvl = '';
let dir = 'ar-en';
let selDir = 'random';
let wLvl = 'A1';
let selectedLetter = '';

function init() {
  const saved = localStorage.getItem('easyApp');
  if (!saved) {
    words.A1 = [...A1_WORDS];
    save();
  } else {
    const data = JSON.parse(saved);
    words = data.w || {};
    errors = data.e || [];
    stats = data.s || { correct: 0, wrong: 0 };
  }
  
  const darkMode = localStorage.getItem('darkMode');
  if (darkMode === 'true') {
    document.body.classList.add('dark-mode');
    document.querySelector('.dark-mode-btn').textContent = 'â˜€ï¸';
  }
  
  createAddLetters();
}

function save() {
  localStorage.setItem('easyApp', JSON.stringify({ w: words, e: errors, s: stats }));
}

function toggleDark() {
  document.body.classList.toggle('dark-mode');
  const isDark = document.body.classList.contains('dark-mode');
  document.querySelector('.dark-mode-btn').textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  localStorage.setItem('darkMode', isDark);
}

function createAddLetters() {
  const container = document.getElementById('add-letters');
  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
  container.innerHTML = '';
  
  letters.forEach(letter => {
    const btn = document.createElement('button');
    btn.className = 'letter-select-btn';
    btn.textContent = letter;
    btn.onclick = () => selectAddLetter(letter);
    container.appendChild(btn);
  });
  
  const anyBtn = document.createElement('button');
  anyBtn.className = 'letter-select-btn active';
  anyBtn.textContent = 'Ø§Ù„ÙƒÙ„';
  anyBtn.onclick = () => selectAddLetter('');
  anyBtn.style.gridColumn = 'span 2';
  container.appendChild(anyBtn);
}

function selectAddLetter(letter) {
  selectedLetter = letter;
  document.querySelectorAll('#add-letters .letter-select-btn').forEach(b => {
    b.classList.remove('active');
  });
  event.target.classList.add('active');
  
  const engInput = document.getElementById('eng');
  if (letter && letter !== 'Ø§Ù„ÙƒÙ„') {
    engInput.placeholder = 'ÙƒÙ„Ù…Ø© ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù ' + letter;
  } else {
    engInput.placeholder = 'Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ';
  }
}

function selectLevel(l) {
  lvl = l;
  document.querySelectorAll('#page-add .level-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
}

function selectWordsLevel(l) {
  wLvl = l;
  document.querySelectorAll('#page-words .level-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  displayWords();
}

function selectTestLevel(l) {
  testLvl = l;
  document.querySelectorAll('#page-test .level-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('test-opt').classList.remove('hidden');
  document.getElementById('letters').classList.add('hidden');
  createLetters();
}

function selectDir(d) {
  selDir = d;
  document.getElementById('letters').classList.remove('hidden');
}

function createLetters() {
  const grid = document.getElementById('grid');
  
  if (!words[testLvl] || words[testLvl].length === 0) {
    grid.innerHTML = '<p style="color: #f44336; text-align: center; padding: 20px;">âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰</p>';
    return;
  }
  
  const letterCounts = {};
  words[testLvl].forEach(w => {
    const first = w.english[0].toUpperCase();
    if (!letterCounts[first]) letterCounts[first] = 0;
    letterCounts[first]++;
  });
  
  grid.innerHTML = '';
  Object.keys(letterCounts).sort().forEach(letter => {
    const btn = document.createElement('button');
    btn.className = 'letter-btn';
    btn.innerHTML = letter + '<br><small style="font-size: 0.7em;">(' + letterCounts[letter] + ')</small>';
    btn.onclick = () => startTest('letter', letter);
    grid.appendChild(btn);
  });
}

function addWord() {
  const eng = document.getElementById('eng').value.trim();
  const ara = document.getElementById('ara').value.trim();
  const msg = document.getElementById('msg');
  
  if (!eng || !ara) {
    msg.textContent = 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„';
    msg.style.color = '#f44336';
    setTimeout(() => msg.textContent = '', 3000);
    return;
  }
  
  if (selectedLetter && selectedLetter !== 'Ø§Ù„ÙƒÙ„') {
    const firstLetter = eng[0].toUpperCase();
    if (firstLetter !== selectedLetter) {
      msg.textContent = 'âš ï¸ Ø§Ù„ÙƒÙ„Ù…Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù ' + selectedLetter;
      msg.style.color = '#f44336';
      setTimeout(() => msg.textContent = '', 3000);
      return;
    }
  }
  
  if (!words[lvl]) words[lvl] = [];
  
  const duplicate = words[lvl].find(w => w.english.toLowerCase() === eng.toLowerCase());
  if (duplicate) {
    msg.textContent = 'âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„';
    msg.style.color = '#FF9800';
    setTimeout(() => msg.textContent = '', 3000);
    return;
  }
  
  words[lvl].push({ english: eng, arabic: ara });
  save();
  
  document.getElementById('eng').value = '';
  document.getElementById('ara').value = '';
  
  msg.textContent = 'âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!';
  msg.style.color = '#4CAF50';
  setTimeout(() => msg.textContent = '', 3000);
  
  updateStats();
}

function displayWords() {
  const list = document.getElementById('words-list');
  const searchTerm = document.getElementById('search').value.toLowerCase();
  
  if (!words[wLvl] || words[wLvl].length === 0) {
    list.innerHTML = '<p style="text-align: center; color: var(--accent); padding: 30px; font-size: 1.2em;">ğŸ“š Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰</p>';
    return;
  }
  
  let filtered = words[wLvl].filter(w =>
    w.english.toLowerCase().includes(searchTerm) ||
    w.arabic.includes(searchTerm)
  );
  
  if (filtered.length === 0) {
    list.innerHTML = '<p style="text-align: center; color: #f44336; padding: 30px; font-size: 1.2em;">ğŸ” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«</p>';
    return;
  }
  
  list.innerHTML = filtered.map((w, i) => {
    const originalIndex = words[wLvl].indexOf(w);
    return '<div class="word-item"><div><strong style="font-size: 1.1em; color: var(--accent);">' + w.english + '</strong><span style="margin: 0 10px;">â†</span><strong style="font-size: 1.1em;">' + w.arabic + '</strong></div><button style="background: linear-gradient(135deg, #f44336, #d32f2f); padding: 10px 15px; border-radius: 8px; color: white; border: none; cursor: pointer; transition: all 0.3s; margin: 0;" onclick="delWord(\'' + wLvl + '\', ' + originalIndex + ')" onmouseover="this.style.transform=\'scale(1.1)\'" onmouseout="this.style.transform=\'scale(1)\'">ğŸ—‘ï¸</button></div>';
  }).join('');
}

function filterWords() {
  displayWords();
}

function delWord(level, index) {
  if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø©ØŸ')) {
    words[level].splice(index, 1);
    save();
    displayWords();
    updateStats();
  }
}

function normalize(text) {
  return text.trim().toLowerCase().replace(/\s+/g, ' ').replace(/[^\w\s\u0600-\u06FF]/g, '');
}

function startTest(type, param) {
  if (!words[testLvl] || words[testLvl].length === 0) {
    alert('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±');
    return;
  }
  
  if (selDir === 'random') {
    dir = Math.random() > 0.5 ? 'ar-en' : 'en-ar';
  } else {
    dir = selDir;
  }
  
  let allWords = [...words[testLvl]];
  
  if (type === 'letter') {
    test = allWords.filter(w => w.english[0].toUpperCase() === param);
    if (test.length === 0) {
      alert('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª ØªØ¨Ø¯Ø£ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø­Ø±Ù');
      return;
    }
  } else {
    test = allWords;
  }
  
  test = test.sort(() => Math.random() - 0.5);
  idx = 0;
  
  document.getElementById('test-card').classList.remove('hidden');
  
  const dirText = dir === 'ar-en' ? 'ğŸ‡¸ğŸ‡¦ Ø¹Ø±Ø¨ÙŠ â†’ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ğŸ‡¬ğŸ‡§' : 'ğŸ‡¬ğŸ‡§ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ â†’ Ø¹Ø±Ø¨ÙŠ ğŸ‡¸ğŸ‡¦';
  const testType = type === 'letter' ? 'Ø­Ø±Ù ' + param : 'ğŸ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ';
  document.getElementById('test-title').textContent = testType + ' - ' + dirText;
  
  showQuestion();
}

function showQuestion() {
  if (idx >= test.length) {
    const percentage = Math.round((stats.correct / (stats.correct + stats.wrong)) * 100) || 0;
    document.getElementById('q').innerHTML = '<h2 style="color: #4CAF50; margin-bottom: 20px;">ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!</h2><p style="font-size: 1.3em; margin: 10px 0;">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: <strong>' + test.length + '</strong></p><p style="font-size: 1.3em; margin: 10px 0; color: #4CAF50;">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: <strong>' + stats.correct + '</strong> âœ…</p><p style="font-size: 1.3em; margin: 10px 0; color: #f44336;">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: <strong>' + stats.wrong + '</strong> âŒ</p><p style="font-size: 1.5em; margin: 20px 0; color: var(--accent);">Ø§Ù„Ù†Ø³Ø¨Ø©: <strong>' + percentage + '%</strong></p>';
    document.getElementById('ans').classList.add('hidden');
    document.getElementById('check').classList.add('hidden');
    document.getElementById('next-btn').classList.add('hidden');
    document.querySelector('button[onclick="skip()"]').classList.add('hidden');
    return;
  }
  
  const word = test[idx];
  
  if (dir === 'ar-en') {
    document.getElementById('q').innerHTML = '<strong style="color: var(--accent);">ØªØ±Ø¬Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©:</strong><br><span style="font-size: 1.8em; margin-top: 15px; display: block;">' + word.arabic + '</span>';
  } else {
    document.getElementById('q').innerHTML = '<strong style="color: var(--accent);">ØªØ±Ø¬Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©:</strong><br><span style="font-size: 1.8em; margin-top: 15px; display: block;">' + word.english + '</span>';
  }
  
  const ansInput = document.getElementById('ans');
  ansInput.value = '';
  ansInput.classList.remove('hidden');
  ansInput.disabled = false;
  ansInput.focus();
  
  document.getElementById('result').innerHTML = '';
  document.getElementById('next-btn').classList.add('hidden');
  document.getElementById('check').classList.remove('hidden');
  document.getElementById('check').disabled = false;
  document.querySelector('button[onclick="skip()"]').classList.remove('hidden');
  
  const progress = ((idx + 1) / test.length) * 100;
  document.getElementById('progress').style.width = progress + '%';
  document.getElementById('counter').textContent = 'Ø§Ù„Ø³Ø¤Ø§Ù„ ' + (idx + 1) + ' Ù…Ù† ' + test.length;
}

function checkAns() {
  const word = test[idx];
  const userAnswer = document.getElementById('ans').value;
  const normalizedUser = normalize(userAnswer);
  const normalizedCorrect = dir === 'ar-en' ? normalize(word.english) : normalize(word.arabic);
  const correctAnswer = dir === 'ar-en' ? word.english : word.arabic;
  const resultDiv = document.getElementById('result');
  
  if (normalizedUser === normalizedCorrect) {
    resultDiv.innerHTML = '<div class="result correct">âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª!</div>';
    stats.correct++;
  } else {
    resultDiv.innerHTML = '<div class="result incorrect">âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!<br>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: <strong>' + correctAnswer + '</strong></div>';
    stats.wrong++;
    
    const errorExists = errors.find(e => e.english === word.english);
    if (!errorExists) {
      errors.push(word);
    }
  }
  
  save();
  updateStats();
  
  document.getElementById('next-btn').classList.remove('hidden');
  document.getElementById('check').disabled = true;
  document.getElementById('ans').disabled = true;
  document.querySelector('button[onclick="skip()"]').classList.add('hidden');
}

function skip() {
  const word = test[idx];
  const correctAnswer = dir === 'ar-en' ? word.english : word.arabic;
  const resultDiv = document.getElementById('result');
  
  resultDiv.innerHTML = '<div class="result incorrect">â­ï¸ ØªÙ… Ø§Ù„ØªØ¬Ø§ÙˆØ²!<br>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: <strong>' + correctAnswer + '</strong></div>';
  
  const errorExists = errors.find(e => e.english === word.english);
  if (!errorExists) {
    errors.push(word);
  }
  
  save();
  next();
}

function next() {
  idx++;
  showQuestion();
}

function testErrors() {
  if (errors.length === 0) {
    alert('ğŸ‰ Ø±Ø§Ø¦Ø¹! Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡ Ø³Ø§Ø¨Ù‚Ø©');
    return;
  }
  
  test = [...errors].sort(() => Math.random() - 0.5);
  idx = 0;
  
  if (selDir === 'random') {
    dir = Math.random() > 0.5 ? 'ar-en' : 'en-ar';
  } else {
    dir = selDir;
  }
  
  showPage('test');
  document.getElementById('test-card').classList.remove('hidden');
  
  const dirText = dir === 'ar-en' ? 'ğŸ‡¸ğŸ‡¦ Ø¹Ø±Ø¨ÙŠ â†’ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ğŸ‡¬ğŸ‡§' : 'ğŸ‡¬ğŸ‡§ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ â†’ Ø¹Ø±Ø¨ÙŠ ğŸ‡¸ğŸ‡¦';
  document.getElementById('test-title').textContent = 'âŒ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ - ' + dirText;
  
  showQuestion();
}

function updateStats() {
  let totalWords = 0;
  for (let level in words) {
    totalWords += words[level].length;
  }
  
  document.getElementById('total').textContent = totalWords;
  document.getElementById('correct').textContent = stats.correct;
  document.getElementById('wrong').textContent = stats.wrong;
  
  const errorsList = document.getElementById('errors-list');
  if (errors.length === 0) {
    errorsList.innerHTML = '<p style="text-align: center; color: #4CAF50; padding: 30px; font-size: 1.2em;">ğŸ‰ Ø±Ø§Ø¦Ø¹! Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡</p>';
  } else {
    errorsList.innerHTML = errors.map((err, i) => {
      return '<div class="word-item"><div><strong style="font-size: 1.1em; color: #f44336;">' + err.english + '</strong><span style="margin: 0 10px;">â†</span><strong style="font-size: 1.1em;">' + err.arabic + '</strong></div><button style="background: linear-gradient(135deg, #f44336, #d32f2f); padding: 10px 15px; border-radius: 8px; color: white; border: none; cursor: pointer; margin: 0;" onclick="delError(' + i + ')">ğŸ—‘ï¸</button></div>';
    }).join('');
  }
  
  const levelStats = document.getElementById('level-stats');
  const levels = ['A1', 'A2', 'B1', 'B2', 'C1'];
  const colors = {
    'A1': '#4CAF50',
    'A2': '#2196F3',
    'B1': '#FF9800',
    'B2': '#9C27B0',
    'C1': '#FFD700'
  };
  
  let statsHTML = '<h3 style="margin-top: 30px; color: var(--text); font-size: 1.4em;">ğŸ“Š Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</h3>';
  
  levels.forEach(level => {
    const count = words[level] ? words[level].length : 0;
    const icon = level === 'C1' ? 'ğŸ‘‘' : 'ğŸ“š';
    statsHTML += '<div style="background: var(--input-bg); padding: 20px; margin: 15px 0; border-radius: 12px; border-right: 6px solid ' + colors[level] + '; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s;" onmouseover="this.style.transform=\'translateX(-5px)\'; this.style.boxShadow=\'0 5px 20px rgba(0,0,0,0.2)\'" onmouseout="this.style.transform=\'translateX(0)\'; this.style.boxShadow=\'none\'"><div style="display: flex; align-items: center; gap: 15px;"><span style="font-size: 2em;">' + icon + '</span><strong style="font-size: 1.3em;">' + level + '</strong></div><span style="background: ' + colors[level] + '; color: white; padding: 8px 20px; border-radius: 25px; font-weight: bold; font-size: 1.2em;">' + count + '</span></div>';
  });
  
  levelStats.innerHTML = statsHTML;
}

function delError(index) {
  if (confirm('âš ï¸ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŸ')) {
    errors.splice(index, 1);
    save();
    updateStats();
  }
}

function showReset() {
  document.getElementById('modal').classList.add('active');
  toggleMenu();
}

function hideModal() {
  document.getElementById('modal').classList.remove('active');
}

function confirmReset() {
  const userWords = {};
  
  for (let level in words) {
    if (level !== 'A1') {
      userWords[level] = words[level];
    } else {
      const defaultEnglish = A1_WORDS.map(w => w.english);
      userWords.A1 = words.A1.filter(w => !defaultEnglish.includes(w.english));
    }
  }
  
  words = userWords;
  
  if (words.A1 && words.A1.length > 0) {
    words.A1 = [...A1_WORDS, ...words.A1];
  } else {
    words.A1 = [...A1_WORDS];
  }
  
  errors = [];
  stats = { correct: 0, wrong: 0 };
  
  save();
  updateStats();
  
  document.getElementById('eng').value = '';
  document.getElementById('ara').value = '';
  document.getElementById('test-card').classList.add('hidden');
  
  hideModal();
  showPage('add');
  
  const msg = document.getElementById('msg');
  msg.textContent = 'âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­';
  msg.style.color = '#4CAF50';
  setTimeout(() => msg.textContent = '', 3000);
}

function toggleMenu() {
  document.getElementById('sidebar').classList.toggle('active');
  document.getElementById('overlay').classList.toggle('active');
}

function showPage(pageName) {
  document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
  document.getElementById('page-' + pageName).classList.remove('hidden');
  toggleMenu();
  updateStats();
  
  if (pageName === 'words') {
    displayWords();
  }
}

document.getElementById('ans').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    const nextBtn = document.getElementById('next-btn');
    if (!nextBtn.classList.contains('hidden')) {
      next();
    } else {
      checkAns();
    }
  }
});

init();
updateStats();
</script>
</body>
  </html>
